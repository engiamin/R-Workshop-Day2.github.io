<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>TIDY DATA</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Day 2</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Data Wrangling</a>
</li>
<li>
  <a href="gather.html">GATHER DATA</a>
</li>
<li>
  <a href="tidy.html">TIDY DATA</a>
</li>
<li>
  <a href="transform.html">TRANSFORM DATA</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">TIDY DATA</h1>

</div>


<style type="text/css">
  body{
  font-size: 14pt;
}
</style>
<style type="text/css">
code.r{
  font-size: 16px;
}
pre {
  font-size: 16px
}
</style>
<p>Tidying data involves assessing the data first then cleaning it accordingly. In the following steps, every problem encountered during assessment will be programatically cleaned before moving to the next piece of assessment.</p>
<div style="margin-bottom:50px;">

</div>
<div id="first-things-first" class="section level1">
<h1>First Things First</h1>
<p>There are 8 data files (i.e. dataframes) that need to be inspected and assessed containing basically information for the same observational units (i.e. experimental subjects). Doing the assessment on 8 dataframes is NOT EFFICIENT AT ALL. Data need to be merged.</p>
<ul>
<li><strong>First:</strong> from visual inspection, there needs to be a column in each dataframe mentioning whether the subject was assigned the control or the pride treatment. We need to <a href="https://www.statmethods.net/management/variables.html">create a new variable</a> in each dataframe and call it for example “Treatment” that can take two values, either “Control” or “Pride”.</li>
</ul>
<pre class="r"><code># In the four &#39;Control&#39; files, add a new column (Treatment) that takes the constant value &quot;Control&quot;
S1_Control_DG$Treatment &lt;- &quot;Control&quot;
S1_Control_PG$Treatment &lt;- &quot;Control&quot;
S2_Control_DG$Treatment &lt;- &quot;Control&quot;
S2_Control_PG$Treatment &lt;- &quot;Control&quot;</code></pre>
<div style="margin-bottom:50px;">

</div>
<pre class="r"><code># Check if the column is added
head(S1_Control_DG,5)</code></pre>
<pre><code>##    Date Session Subject.ID Group GG1F1 GG1F2 GG1F3 GG1F4 GG1F5 GG1F6 GG1F7
## 1 43289       1          1     1     X     Y     Y     X     Y     Y     Y
## 2 43289       1          2     1     X     X     Y     Y     Y     Y     Y
## 3 43289       1          3     1     X     Y     X     Y     X     X     Y
## 4 43289       1          4     1     X     Y     X     X     X     X     X
## 5 43289       1          5     2     Y     Y     X     Y     Y     Y     X
##   GG1F8 Treatment
## 1     Y   Control
## 2     Y   Control
## 3     Y   Control
## 4     X   Control
## 5     X   Control</code></pre>
<div style="margin-bottom:50px;">

</div>
<pre class="r"><code># Do the same for the &quot;Trt&quot; files, add a new column (Treatment) that takes the constant value &quot;Pride&quot;
S1_Trt_DG$Treatment &lt;- &quot;Pride&quot;
S1_Trt_PG$Treatment &lt;- &quot;Pride&quot;
S2_Trt_DG$Treatment &lt;- &quot;Pride&quot;
S2_Trt_PG$Treatment &lt;- &quot;Pride&quot;</code></pre>
<pre class="r"><code># Check if the column is added
head(S1_Trt_DG,5)</code></pre>
<pre><code>##    Date Session Subject.ID Group GG1F1 GG1F2 GG1F3 GG1F4 GG1F5 GG1F6 GG1F7
## 1 43290       1          1     1     X     X     X     X     X     X     X
## 2 43290       1          2     1     Y     Y     Y     Y     Y     Y     Y
## 3 43290       1          3     1     X     Y     X     Y     X     X     Y
## 4 43290       1          4     1     X     X     X     X     X     X     X
## 5 43290       1          5     2     Y     Y     X     Y     Y     Y     X
##   GG1F8 Treatment
## 1     Y     Pride
## 2     Y     Pride
## 3     Y     Pride
## 4     X     Pride
## 5     X     Pride</code></pre>
<div style="margin-bottom:50px;">

</div>
<ul>
<li><strong>Second:</strong> Each subject plays the two games, we need to <a href="https://dplyr.tidyverse.org/reference/mutate-joins.html"><code>join</code></a> the answers of each subject in the DG file with the respective data in the PG file.</li>
</ul>
<pre class="r"><code># Join S1_Control_DG with S1_Control_PG
S1_control &lt;- full_join(S1_Control_DG,S1_Control_PG)</code></pre>
<pre><code>## Joining, by = c(&quot;Date&quot;, &quot;Session&quot;, &quot;Subject.ID&quot;, &quot;Group&quot;, &quot;Treatment&quot;)</code></pre>
<pre class="r"><code># Take a look at the joined dfs
head(S1_control,5)</code></pre>
<pre><code>##    Date Session Subject.ID Group GG1F1 GG1F2 GG1F3 GG1F4 GG1F5 GG1F6 GG1F7
## 1 43289       1          1     1     X     Y     Y     X     Y     Y     Y
## 2 43289       1          2     1     X     X     Y     Y     Y     Y     Y
## 3 43289       1          3     1     X     Y     X     Y     X     X     Y
## 4 43289       1          4     1     X     Y     X     X     X     X     X
## 5 43289       1          5     2     Y     Y     X     Y     Y     Y     X
##   GG1F8 Treatment q101 q102 q103 q104 SubTotal1 SubTotal2 SubTotal3 SubTotal4
## 1     Y   Control    1   21    1    2        24      22.0      20.0      20.8
## 2     Y   Control    2   20    1    2        24      22.0      20.0      20.8
## 3     Y   Control    2   22    2    2        24      22.0      20.0      18.8
## 4     X   Control    2   20    1    2        14      17.0      20.0      20.8
## 5     X   Control    2   23    1    2        18      23.6      21.6      19.2
##   SubTotal5 SubTotal6 SubTotal7 SubTotal8 SubTotal9 SubTotal10 Profit C1
## 1      20.4      23.6      21.2      20.0      20.2       20.4  53.15  0
## 2      19.4      23.6      21.2      20.0      19.2       20.4  52.65  0
## 3      20.4      18.6      18.2      20.0      21.2       19.4  50.65  0
## 4      20.4      19.6      21.2      20.0      21.2       20.4  48.65 10
## 5      21.2      19.4      21.6      22.8      21.2       20.8  52.35  8
##   GroupContribute1 ProfitPG1 C2 GroupContribute2 ProfitPG2 C3 GroupContribute3
## 1               10         4  0                5       2.0  0                0
## 2               10         4  0                5       2.0  0                0
## 3               10         4  0                5       2.0  0                0
## 4               10         4  5                5       2.0  0                0
## 5               15         6  4               19       7.6  4               14
##   ProfitPG3 C4 GroupContribute4 ProfitPG4 C5 GroupContribute5 ProfitPG5 C6
## 1       0.0  0                2       0.8  0                1       0.4  0
## 2       0.0  0                2       0.8  1                1       0.4  0
## 3       0.0  2                2       0.8  0                1       0.4  5
## 4       0.0  0                2       0.8  0                1       0.4  4
## 5       5.6  2                3       1.2  0                3       1.2  1
##   GroupContribute6 ProfitPG6 C7 GroupContribute7 ProfitPG7 C8 GroupContribute8
## 1                9       3.6  0                3       1.2  0                0
## 2                9       3.6  0                3       1.2  0                0
## 3                9       3.6  3                3       1.2  0                0
## 4                9       3.6  0                3       1.2  0                0
## 5                1       0.4  0                4       1.6  0                7
##   ProfitPG8 C9 GroupContribute9 ProfitPG9 C10 GroupContribute10 ProfitPG10 q206
## 1       0.0  1                3       1.2   0                 1        0.4    2
## 2       0.0  2                3       1.2   0                 1        0.4    1
## 3       0.0  0                3       1.2   1                 1        0.4    2
## 4       0.0  0                3       1.2   0                 1        0.4    2
## 5       2.8  0                3       1.2   0                 2        0.8    2</code></pre>
<div style="margin-bottom:50px;">

</div>
<pre class="r"><code># Do the same with S2_Control_DG and S2_Control_PG
S2_control &lt;- full_join(S2_Control_DG,S2_Control_PG)</code></pre>
<pre><code>## Joining, by = c(&quot;Date&quot;, &quot;Session&quot;, &quot;Subject.ID&quot;, &quot;Group&quot;, &quot;Treatment&quot;)</code></pre>
<div style="margin-bottom:50px;">

</div>
<pre class="r"><code># Now the Trt files
S1_trt &lt;- full_join(S1_Trt_DG,S1_Trt_PG)</code></pre>
<pre><code>## Joining, by = c(&quot;Date&quot;, &quot;Session&quot;, &quot;Subject.ID&quot;, &quot;Group&quot;, &quot;Treatment&quot;)</code></pre>
<pre class="r"><code>S2_trt &lt;- full_join(S2_Trt_DG,S2_Trt_PG)</code></pre>
<pre><code>## Joining, by = c(&quot;Date&quot;, &quot;Session&quot;, &quot;Subject.ID&quot;, &quot;Group&quot;, &quot;Treatment&quot;)</code></pre>
<p>Now, we have 4 files instead of 8.</p>
<div style="margin-bottom:50px;">

</div>
<ul>
<li><strong>Third:</strong> we need to <a href="https://dplyr.tidyverse.org/reference/mutate-joins.html"><code>join</code></a> session one data with session two for each of the control and pride treatments.</li>
</ul>
<pre class="r"><code>control_data &lt;- full_join(S1_control,S2_control)</code></pre>
<pre><code>## Joining, by = c(&quot;Date&quot;, &quot;Session&quot;, &quot;Subject.ID&quot;, &quot;Group&quot;, &quot;GG1F1&quot;, &quot;GG1F2&quot;, &quot;GG1F3&quot;, &quot;GG1F4&quot;, &quot;GG1F5&quot;, &quot;GG1F6&quot;, &quot;GG1F7&quot;, &quot;GG1F8&quot;, &quot;Treatment&quot;, &quot;q101&quot;, &quot;q102&quot;, &quot;q103&quot;, &quot;q104&quot;, &quot;SubTotal1&quot;, &quot;SubTotal2&quot;, &quot;SubTotal3&quot;, &quot;SubTotal4&quot;, &quot;SubTotal5&quot;, &quot;SubTotal6&quot;, &quot;SubTotal7&quot;, &quot;SubTotal8&quot;, &quot;SubTotal9&quot;, &quot;SubTotal10&quot;, &quot;Profit&quot;, &quot;C1&quot;, &quot;GroupContribute1&quot;, &quot;ProfitPG1&quot;, &quot;C2&quot;, &quot;GroupContribute2&quot;, &quot;ProfitPG2&quot;, &quot;C3&quot;, &quot;GroupContribute3&quot;, &quot;ProfitPG3&quot;, &quot;C4&quot;, &quot;GroupContribute4&quot;, &quot;ProfitPG4&quot;, &quot;C5&quot;, &quot;GroupContribute5&quot;, &quot;ProfitPG5&quot;, &quot;C6&quot;, &quot;GroupContribute6&quot;, &quot;ProfitPG6&quot;, &quot;C7&quot;, &quot;GroupContribute7&quot;, &quot;ProfitPG7&quot;, &quot;C8&quot;, &quot;GroupContribute8&quot;, &quot;ProfitPG8&quot;, &quot;C9&quot;, &quot;GroupContribute9&quot;, &quot;ProfitPG9&quot;, &quot;C10&quot;, &quot;GroupContribute10&quot;, &quot;ProfitPG10&quot;, &quot;q206&quot;)</code></pre>
<pre class="r"><code>pride_data &lt;- full_join(S1_trt,S2_trt )</code></pre>
<pre><code>## Joining, by = c(&quot;Date&quot;, &quot;Session&quot;, &quot;Subject.ID&quot;, &quot;Group&quot;, &quot;GG1F1&quot;, &quot;GG1F2&quot;, &quot;GG1F3&quot;, &quot;GG1F4&quot;, &quot;GG1F5&quot;, &quot;GG1F6&quot;, &quot;GG1F7&quot;, &quot;GG1F8&quot;, &quot;Treatment&quot;, &quot;q101&quot;, &quot;q102&quot;, &quot;q103&quot;, &quot;q104&quot;, &quot;Profit&quot;, &quot;SubTotal1&quot;, &quot;SubTotal2&quot;, &quot;SubTotal3&quot;, &quot;SubTotal4&quot;, &quot;SubTotal5&quot;, &quot;SubTotal6&quot;, &quot;SubTotal7&quot;, &quot;SubTotal8&quot;, &quot;SubTotal9&quot;, &quot;SubTotal10&quot;, &quot;C1&quot;, &quot;GroupContribute1&quot;, &quot;ProfitPG1&quot;, &quot;Rank1&quot;, &quot;PrideTrt1&quot;, &quot;C2&quot;, &quot;GroupContribute2&quot;, &quot;ProfitPG2&quot;, &quot;Rank2&quot;, &quot;PrideTrt2&quot;, &quot;C3&quot;, &quot;GroupContribute3&quot;, &quot;ProfitPG3&quot;, &quot;Rank3&quot;, &quot;PrideTrt3&quot;, &quot;C4&quot;, &quot;GroupContribute4&quot;, &quot;ProfitPG4&quot;, &quot;Rank4&quot;, &quot;PrideTrt4&quot;, &quot;C5&quot;, &quot;GroupContribute5&quot;, &quot;ProfitPG5&quot;, &quot;Rank5&quot;, &quot;PrideTrt5&quot;, &quot;C6&quot;, &quot;GroupContribute6&quot;, &quot;ProfitPG6&quot;, &quot;Rank6&quot;, &quot;PrideTrt6&quot;, &quot;C7&quot;, &quot;GroupContribute7&quot;, &quot;ProfitPG7&quot;, &quot;Rank7&quot;, &quot;PrideTrt7&quot;, &quot;C8&quot;, &quot;GroupContribute8&quot;, &quot;ProfitPG8&quot;, &quot;Rank8&quot;, &quot;PrideTrt8&quot;, &quot;C9&quot;, &quot;GroupContribute9&quot;, &quot;ProfitPG9&quot;, &quot;Rank9&quot;, &quot;PrideTrt9&quot;, &quot;C10&quot;, &quot;GroupContribute10&quot;, &quot;ProfitPG10&quot;, &quot;Rank10&quot;, &quot;PrideTrt10&quot;, &quot;q206&quot;)</code></pre>
<p>We now have 2 dataframes instead of the original 8.</p>
<div style="margin-bottom:50px;">

</div>
<ul>
<li><strong>Fourth:</strong> Let’s save the merged dataframes as excel files so we can use them in the future directly without having to run the previous steps.</li>
</ul>
<pre class="r"><code># Write the control_data dataframe to a xlsx file named &quot;Control Data.xlsx&quot;
write.xlsx(control_data,&quot;Control Data.xlsx&quot;)

# Write the pride_data dataframe to a xlsx file named &quot;Pride Data.xlsx&quot;
write.xlsx(pride_data,&quot;Pride Data.xlsx&quot;)</code></pre>
<div style="margin-bottom:50px;">

</div>
<ul>
<li><strong>Fifth:</strong> Let’s go a step further and merge the control and pride data together.</li>
</ul>
<pre class="r"><code># One of the main advantages of the `full_join` function in the tidyverse package is that it automatically
# filled NAs in the `Rank` and `PrideTrt` columns for the control subjects as they were not shown any
# pride messages

alldata &lt;- full_join(control_data, pride_data)</code></pre>
<pre><code>## Joining, by = c(&quot;Date&quot;, &quot;Session&quot;, &quot;Subject.ID&quot;, &quot;Group&quot;, &quot;GG1F1&quot;, &quot;GG1F2&quot;, &quot;GG1F3&quot;, &quot;GG1F4&quot;, &quot;GG1F5&quot;, &quot;GG1F6&quot;, &quot;GG1F7&quot;, &quot;GG1F8&quot;, &quot;Treatment&quot;, &quot;q101&quot;, &quot;q102&quot;, &quot;q103&quot;, &quot;q104&quot;, &quot;SubTotal1&quot;, &quot;SubTotal2&quot;, &quot;SubTotal3&quot;, &quot;SubTotal4&quot;, &quot;SubTotal5&quot;, &quot;SubTotal6&quot;, &quot;SubTotal7&quot;, &quot;SubTotal8&quot;, &quot;SubTotal9&quot;, &quot;SubTotal10&quot;, &quot;Profit&quot;, &quot;C1&quot;, &quot;GroupContribute1&quot;, &quot;ProfitPG1&quot;, &quot;C2&quot;, &quot;GroupContribute2&quot;, &quot;ProfitPG2&quot;, &quot;C3&quot;, &quot;GroupContribute3&quot;, &quot;ProfitPG3&quot;, &quot;C4&quot;, &quot;GroupContribute4&quot;, &quot;ProfitPG4&quot;, &quot;C5&quot;, &quot;GroupContribute5&quot;, &quot;ProfitPG5&quot;, &quot;C6&quot;, &quot;GroupContribute6&quot;, &quot;ProfitPG6&quot;, &quot;C7&quot;, &quot;GroupContribute7&quot;, &quot;ProfitPG7&quot;, &quot;C8&quot;, &quot;GroupContribute8&quot;, &quot;ProfitPG8&quot;, &quot;C9&quot;, &quot;GroupContribute9&quot;, &quot;ProfitPG9&quot;, &quot;C10&quot;, &quot;GroupContribute10&quot;, &quot;ProfitPG10&quot;, &quot;q206&quot;)</code></pre>
<p>Save the new compiled file for further use.</p>
<pre class="r"><code>write.xlsx(alldata, &quot;All Data.xlsx&quot;)</code></pre>
<div style="margin-bottom:80px;">

</div>
</div>
<div id="looking-at-quality-issues" class="section level1">
<h1>Looking at Quality Issues</h1>
<div style="margin-bottom:30px;">

</div>
<ul>
<li><strong>First:</strong> Let’s take a quick look at the structure of the data.</li>
</ul>
<pre class="r"><code># Take a look at the structure of the data
str(alldata)</code></pre>
<pre><code>## &#39;data.frame&#39;:    96 obs. of  79 variables:
##  $ Date             : num  43289 43289 43289 43289 43289 ...
##  $ Session          : num  1 1 1 1 1 1 1 1 1 1 ...
##  $ Subject.ID       : num  1 2 3 4 5 6 7 8 9 10 ...
##  $ Group            : num  1 1 1 1 2 2 2 2 3 3 ...
##  $ GG1F1            : chr  &quot;X&quot; &quot;X&quot; &quot;X&quot; &quot;X&quot; ...
##  $ GG1F2            : chr  &quot;Y&quot; &quot;X&quot; &quot;Y&quot; &quot;Y&quot; ...
##  $ GG1F3            : chr  &quot;Y&quot; &quot;Y&quot; &quot;X&quot; &quot;X&quot; ...
##  $ GG1F4            : chr  &quot;X&quot; &quot;Y&quot; &quot;Y&quot; &quot;X&quot; ...
##  $ GG1F5            : chr  &quot;Y&quot; &quot;Y&quot; &quot;X&quot; &quot;X&quot; ...
##  $ GG1F6            : chr  &quot;Y&quot; &quot;Y&quot; &quot;X&quot; &quot;X&quot; ...
##  $ GG1F7            : chr  &quot;Y&quot; &quot;Y&quot; &quot;Y&quot; &quot;X&quot; ...
##  $ GG1F8            : chr  &quot;Y&quot; &quot;Y&quot; &quot;Y&quot; &quot;X&quot; ...
##  $ Treatment        : chr  &quot;Control&quot; &quot;Control&quot; &quot;Control&quot; &quot;Control&quot; ...
##  $ q101             : num  1 2 2 2 2 2 2 1 1 1 ...
##  $ q102             : num  21 20 22 20 23 22 22 21 21 21 ...
##  $ q103             : num  1 1 2 1 1 1 1 1 1 1 ...
##  $ q104             : num  2 2 2 2 2 2 2 2 2 2 ...
##  $ SubTotal1        : num  24 24 24 14 18 26 24 21 20.6 25.6 ...
##  $ SubTotal2        : num  22 22 22 17 23.6 22.6 24.6 20.6 19 22 ...
##  $ SubTotal3        : num  20 20 20 20 21.6 19.6 21.6 25.6 21.6 20.6 ...
##  $ SubTotal4        : num  20.8 20.8 18.8 20.8 19.2 21.2 20.2 21.2 22 20 ...
##  $ SubTotal5        : num  20.4 19.4 20.4 20.4 21.2 20.2 19.2 21.2 20.8 20.8 ...
##  $ SubTotal6        : num  23.6 23.6 18.6 19.6 19.4 20.4 20.4 20.4 20.8 21.8 ...
##  $ SubTotal7        : num  21.2 21.2 18.2 21.2 21.6 17.6 21.6 21.6 21.2 18.2 ...
##  $ SubTotal8        : num  20 20 20 20 22.8 21.8 21.8 17.8 20.4 20.4 ...
##  $ SubTotal9        : num  20.2 19.2 21.2 21.2 21.2 21.2 18.2 21.2 20 20 ...
##  $ SubTotal10       : num  20.4 20.4 19.4 20.4 20.8 18.8 20.8 20.8 19.6 21.6 ...
##  $ Profit           : num  53.1 52.6 50.6 48.6 52.4 ...
##  $ C1               : num  0 0 0 10 8 0 2 5 5 0 ...
##  $ GroupContribute1 : num  10 10 10 10 15 15 15 15 14 14 ...
##  $ ProfitPG1        : num  4 4 4 4 6 6 6 6 5.6 5.6 ...
##  $ C2               : num  0 0 0 5 4 5 3 7 3 0 ...
##  $ GroupContribute2 : num  5 5 5 5 19 19 19 19 5 5 ...
##  $ ProfitPG2        : num  2 2 2 2 7.6 7.6 7.6 7.6 2 2 ...
##  $ C3               : num  0 0 0 0 4 6 4 0 0 1 ...
##  $ GroupContribute3 : num  0 0 0 0 14 14 14 14 4 4 ...
##  $ ProfitPG3        : num  0 0 0 0 5.6 5.6 5.6 5.6 1.6 1.6 ...
##  $ C4               : num  0 0 2 0 2 0 1 0 0 2 ...
##  $ GroupContribute4 : num  2 2 2 2 3 3 3 3 5 5 ...
##  $ ProfitPG4        : num  0.8 0.8 0.8 0.8 1.2 1.2 1.2 1.2 2 2 ...
##  $ C5               : num  0 1 0 0 0 1 2 0 0 0 ...
##  $ GroupContribute5 : num  1 1 1 1 3 3 3 3 2 2 ...
##  $ ProfitPG5        : num  0.4 0.4 0.4 0.4 1.2 1.2 1.2 1.2 0.8 0.8 ...
##  $ C6               : num  0 0 5 4 1 0 0 0 2 1 ...
##  $ GroupContribute6 : num  9 9 9 9 1 1 1 1 7 7 ...
##  $ ProfitPG6        : num  3.6 3.6 3.6 3.6 0.4 0.4 0.4 0.4 2.8 2.8 ...
##  $ C7               : num  0 0 3 0 0 4 0 0 0 3 ...
##  $ GroupContribute7 : num  3 3 3 3 4 4 4 4 3 3 ...
##  $ ProfitPG7        : num  1.2 1.2 1.2 1.2 1.6 1.6 1.6 1.6 1.2 1.2 ...
##  $ C8               : num  0 0 0 0 0 1 1 5 0 0 ...
##  $ GroupContribute8 : num  0 0 0 0 7 7 7 7 1 1 ...
##  $ ProfitPG8        : num  0 0 0 0 2.8 2.8 2.8 2.8 0.4 0.4 ...
##  $ C9               : num  1 2 0 0 0 0 3 0 0 0 ...
##  $ GroupContribute9 : num  3 3 3 3 3 3 3 3 0 0 ...
##  $ ProfitPG9        : num  1.2 1.2 1.2 1.2 1.2 1.2 1.2 1.2 0 0 ...
##  $ C10              : num  0 0 1 0 0 2 0 0 2 0 ...
##  $ GroupContribute10: num  1 1 1 1 2 2 2 2 4 4 ...
##  $ ProfitPG10       : num  0.4 0.4 0.4 0.4 0.8 0.8 0.8 0.8 1.6 1.6 ...
##  $ q206             : num  2 1 2 2 2 2 2 3 1 1 ...
##  $ Rank1            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt1        : chr  NA NA NA NA ...
##  $ Rank2            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt2        : chr  NA NA NA NA ...
##  $ Rank3            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt3        : chr  NA NA NA NA ...
##  $ Rank4            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt4        : chr  NA NA NA NA ...
##  $ Rank5            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt5        : chr  NA NA NA NA ...
##  $ Rank6            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt6        : chr  NA NA NA NA ...
##  $ Rank7            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt7        : chr  NA NA NA NA ...
##  $ Rank8            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt8        : chr  NA NA NA NA ...
##  $ Rank9            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt9        : chr  NA NA NA NA ...
##  $ Rank10           : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt10       : chr  NA NA NA NA ...</code></pre>
<div style="margin-bottom:50px;">

</div>
<p>Looking at the structure of the variables, a number of issues are observed:</p>
<ol style="list-style-type: decimal">
<li><code>Date</code> variable is a number not date.</li>
<li><code>Subject.ID</code> variable should be a unique factor for each subject.</li>
<li><code>Group</code> variable should also be a factor unqiue for each group.</li>
<li><code>GG1F1</code> to <code>GG1F8</code> need to be renamed and become factors instead of characters.</li>
<li><code>Treatment</code>needs to be a factor.</li>
<li><code>q101</code> to <code>q104</code> and <code>q206</code> need to be renamed and inspected individually.</li>
<li><code>PrideTrt1</code> to <code>PrideTrt10</code> needs to be changed into a factor.</li>
</ol>
<div style="margin-bottom:50px;">

</div>
<pre class="r"><code>###################################################
# Issue (1): `Date` variable is a number not date.#
###################################################

# Excel has logged datetimes using the number format. To convert it properly use the as.Date() function
# providing the argument origin origin = &quot;1899-12-30&quot;
alldata$Date &lt;- as.Date(alldata$Date, origin = &quot;1899-12-30&quot;)</code></pre>
<pre class="r"><code># Take a look at the date column now
str(alldata$Date)</code></pre>
<pre><code>##  Date[1:96], format: &quot;2018-07-08&quot; &quot;2018-07-08&quot; &quot;2018-07-08&quot; &quot;2018-07-08&quot; &quot;2018-07-08&quot; ...</code></pre>
<pre class="r"><code>head(alldata$Date,5) #looks great!</code></pre>
<pre><code>## [1] &quot;2018-07-08&quot; &quot;2018-07-08&quot; &quot;2018-07-08&quot; &quot;2018-07-08&quot; &quot;2018-07-08&quot;</code></pre>
<div style="margin-bottom:50px;">

</div>
<pre class="r"><code>###############################################################################################
# Issue (2): `Subject.ID` variable should be a unique factor for each subject not a character.#
###############################################################################################

# Are there any repeated values of Subject.ID?
nrow(alldata[duplicated(alldata$Subject.ID),])</code></pre>
<pre><code>## [1] 48</code></pre>
<p>There are 48 duplicated Subject.IDs. Each ID is present once for a subject in the control and once in the pride trt.</p>
<pre class="r"><code>table(alldata$Subject.ID,alldata$Treatment)</code></pre>
<pre><code>##     
##      Control Pride
##   1        1     1
##   2        1     1
##   3        1     1
##   4        1     1
##   5        1     1
##   6        1     1
##   7        1     1
##   8        1     1
##   9        1     1
##   10       1     1
##   11       1     1
##   12       1     1
##   13       1     1
##   14       1     1
##   15       1     1
##   16       1     1
##   17       1     1
##   18       1     1
##   19       1     1
##   20       1     1
##   21       1     1
##   22       1     1
##   23       1     1
##   24       1     1
##   25       1     1
##   26       1     1
##   27       1     1
##   28       1     1
##   29       1     1
##   30       1     1
##   31       1     1
##   32       1     1
##   33       1     1
##   34       1     1
##   35       1     1
##   36       1     1
##   37       1     1
##   38       1     1
##   39       1     1
##   40       1     1
##   41       1     1
##   42       1     1
##   43       1     1
##   44       1     1
##   45       1     1
##   46       1     1
##   47       1     1
##   48       1     1</code></pre>
<pre class="r"><code># Create a new variable ID giving each subject a unique ID starting from 1.
alldata$ID &lt;- 1:nrow(alldata)

# Convert it into a factor
alldata$ID &lt;- as.factor(alldata$ID)

# Take a look at the structure of the new ID variable
str(alldata$ID) #looks good. </code></pre>
<pre><code>##  Factor w/ 96 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...</code></pre>
<div style="margin-bottom:50px;">

</div>
<pre class="r"><code>##############################################################################
# Issue (3): `Group` variable should also be a factor unqiue for each group. #
##############################################################################

# Create a new variable Group_ID giving unqiue IDs to each 4 members of a group
alldata$Group_ID &lt;- rep(1:24, each = 4)

# Convert this new variable into a factor
alldata$Group_ID &lt;- as.factor(alldata$Group_ID)</code></pre>
<pre class="r"><code># Take a look at the structure now
str(alldata$Group_ID) #perfect!</code></pre>
<pre><code>##  Factor w/ 24 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 1 1 1 1 2 2 2 2 3 3 ...</code></pre>
<div style="margin-bottom:50px;">

</div>
<pre class="r"><code>#############################################################################################
# Issue (4) `GG1F1` to `GG1F8` need to be renamed and become factors instead of characters. #
#############################################################################################

# Rename the variables to Scenario1 to Scenario8.
alldata &lt;- rename(alldata,
    Scenario1 = GG1F1,
    Scenario2 = GG1F2,
    Scenario3 = GG1F3,
    Scenario4 = GG1F4,
    Scenario5 = GG1F5,
    Scenario6 = GG1F6,
    Scenario7 = GG1F7,
    Scenario8 = GG1F8,
    )</code></pre>
<pre class="r"><code># Check the new varaible names
names(alldata) # Good!</code></pre>
<pre><code>##  [1] &quot;Date&quot;              &quot;Session&quot;           &quot;Subject.ID&quot;       
##  [4] &quot;Group&quot;             &quot;Scenario1&quot;         &quot;Scenario2&quot;        
##  [7] &quot;Scenario3&quot;         &quot;Scenario4&quot;         &quot;Scenario5&quot;        
## [10] &quot;Scenario6&quot;         &quot;Scenario7&quot;         &quot;Scenario8&quot;        
## [13] &quot;Treatment&quot;         &quot;q101&quot;              &quot;q102&quot;             
## [16] &quot;q103&quot;              &quot;q104&quot;              &quot;SubTotal1&quot;        
## [19] &quot;SubTotal2&quot;         &quot;SubTotal3&quot;         &quot;SubTotal4&quot;        
## [22] &quot;SubTotal5&quot;         &quot;SubTotal6&quot;         &quot;SubTotal7&quot;        
## [25] &quot;SubTotal8&quot;         &quot;SubTotal9&quot;         &quot;SubTotal10&quot;       
## [28] &quot;Profit&quot;            &quot;C1&quot;                &quot;GroupContribute1&quot; 
## [31] &quot;ProfitPG1&quot;         &quot;C2&quot;                &quot;GroupContribute2&quot; 
## [34] &quot;ProfitPG2&quot;         &quot;C3&quot;                &quot;GroupContribute3&quot; 
## [37] &quot;ProfitPG3&quot;         &quot;C4&quot;                &quot;GroupContribute4&quot; 
## [40] &quot;ProfitPG4&quot;         &quot;C5&quot;                &quot;GroupContribute5&quot; 
## [43] &quot;ProfitPG5&quot;         &quot;C6&quot;                &quot;GroupContribute6&quot; 
## [46] &quot;ProfitPG6&quot;         &quot;C7&quot;                &quot;GroupContribute7&quot; 
## [49] &quot;ProfitPG7&quot;         &quot;C8&quot;                &quot;GroupContribute8&quot; 
## [52] &quot;ProfitPG8&quot;         &quot;C9&quot;                &quot;GroupContribute9&quot; 
## [55] &quot;ProfitPG9&quot;         &quot;C10&quot;               &quot;GroupContribute10&quot;
## [58] &quot;ProfitPG10&quot;        &quot;q206&quot;              &quot;Rank1&quot;            
## [61] &quot;PrideTrt1&quot;         &quot;Rank2&quot;             &quot;PrideTrt2&quot;        
## [64] &quot;Rank3&quot;             &quot;PrideTrt3&quot;         &quot;Rank4&quot;            
## [67] &quot;PrideTrt4&quot;         &quot;Rank5&quot;             &quot;PrideTrt5&quot;        
## [70] &quot;Rank6&quot;             &quot;PrideTrt6&quot;         &quot;Rank7&quot;            
## [73] &quot;PrideTrt7&quot;         &quot;Rank8&quot;             &quot;PrideTrt8&quot;        
## [76] &quot;Rank9&quot;             &quot;PrideTrt9&quot;         &quot;Rank10&quot;           
## [79] &quot;PrideTrt10&quot;        &quot;ID&quot;                &quot;Group_ID&quot;</code></pre>
<pre class="r"><code># Now change the values of the renamed variables into factors.

# Can be done one-by-one:
#alldata$Scenario1 &lt;- as.factor(alldata$Scenario1)

## or a more advanced method ##

# Select all variables that begin with Scenario
ScenarioVars &lt;- grep(&quot;Scenario&quot;,names(alldata))

# Change them all at once to factor using lapply
alldata[,ScenarioVars] &lt;- lapply(alldata[,ScenarioVars], factor)</code></pre>
<pre class="r"><code># Check the structure of the variables
str(alldata) #Yep!</code></pre>
<pre><code>## &#39;data.frame&#39;:    96 obs. of  81 variables:
##  $ Date             : Date, format: &quot;2018-07-08&quot; &quot;2018-07-08&quot; ...
##  $ Session          : num  1 1 1 1 1 1 1 1 1 1 ...
##  $ Subject.ID       : num  1 2 3 4 5 6 7 8 9 10 ...
##  $ Group            : num  1 1 1 1 2 2 2 2 3 3 ...
##  $ Scenario1        : Factor w/ 2 levels &quot;X&quot;,&quot;Y&quot;: 1 1 1 1 2 1 1 2 1 2 ...
##  $ Scenario2        : Factor w/ 2 levels &quot;X&quot;,&quot;Y&quot;: 2 1 2 2 2 2 1 2 1 1 ...
##  $ Scenario3        : Factor w/ 2 levels &quot;X&quot;,&quot;Y&quot;: 2 2 1 1 1 1 2 2 2 2 ...
##  $ Scenario4        : Factor w/ 2 levels &quot;X&quot;,&quot;Y&quot;: 1 2 2 1 2 2 2 2 1 1 ...
##  $ Scenario5        : Factor w/ 2 levels &quot;X&quot;,&quot;Y&quot;: 2 2 1 1 2 1 1 2 1 1 ...
##  $ Scenario6        : Factor w/ 2 levels &quot;X&quot;,&quot;Y&quot;: 2 2 1 1 2 1 1 2 2 1 ...
##  $ Scenario7        : Factor w/ 2 levels &quot;X&quot;,&quot;Y&quot;: 2 2 2 1 1 1 1 1 2 2 ...
##  $ Scenario8        : Factor w/ 2 levels &quot;X&quot;,&quot;Y&quot;: 2 2 2 1 1 2 1 2 2 1 ...
##  $ Treatment        : chr  &quot;Control&quot; &quot;Control&quot; &quot;Control&quot; &quot;Control&quot; ...
##  $ q101             : num  1 2 2 2 2 2 2 1 1 1 ...
##  $ q102             : num  21 20 22 20 23 22 22 21 21 21 ...
##  $ q103             : num  1 1 2 1 1 1 1 1 1 1 ...
##  $ q104             : num  2 2 2 2 2 2 2 2 2 2 ...
##  $ SubTotal1        : num  24 24 24 14 18 26 24 21 20.6 25.6 ...
##  $ SubTotal2        : num  22 22 22 17 23.6 22.6 24.6 20.6 19 22 ...
##  $ SubTotal3        : num  20 20 20 20 21.6 19.6 21.6 25.6 21.6 20.6 ...
##  $ SubTotal4        : num  20.8 20.8 18.8 20.8 19.2 21.2 20.2 21.2 22 20 ...
##  $ SubTotal5        : num  20.4 19.4 20.4 20.4 21.2 20.2 19.2 21.2 20.8 20.8 ...
##  $ SubTotal6        : num  23.6 23.6 18.6 19.6 19.4 20.4 20.4 20.4 20.8 21.8 ...
##  $ SubTotal7        : num  21.2 21.2 18.2 21.2 21.6 17.6 21.6 21.6 21.2 18.2 ...
##  $ SubTotal8        : num  20 20 20 20 22.8 21.8 21.8 17.8 20.4 20.4 ...
##  $ SubTotal9        : num  20.2 19.2 21.2 21.2 21.2 21.2 18.2 21.2 20 20 ...
##  $ SubTotal10       : num  20.4 20.4 19.4 20.4 20.8 18.8 20.8 20.8 19.6 21.6 ...
##  $ Profit           : num  53.1 52.6 50.6 48.6 52.4 ...
##  $ C1               : num  0 0 0 10 8 0 2 5 5 0 ...
##  $ GroupContribute1 : num  10 10 10 10 15 15 15 15 14 14 ...
##  $ ProfitPG1        : num  4 4 4 4 6 6 6 6 5.6 5.6 ...
##  $ C2               : num  0 0 0 5 4 5 3 7 3 0 ...
##  $ GroupContribute2 : num  5 5 5 5 19 19 19 19 5 5 ...
##  $ ProfitPG2        : num  2 2 2 2 7.6 7.6 7.6 7.6 2 2 ...
##  $ C3               : num  0 0 0 0 4 6 4 0 0 1 ...
##  $ GroupContribute3 : num  0 0 0 0 14 14 14 14 4 4 ...
##  $ ProfitPG3        : num  0 0 0 0 5.6 5.6 5.6 5.6 1.6 1.6 ...
##  $ C4               : num  0 0 2 0 2 0 1 0 0 2 ...
##  $ GroupContribute4 : num  2 2 2 2 3 3 3 3 5 5 ...
##  $ ProfitPG4        : num  0.8 0.8 0.8 0.8 1.2 1.2 1.2 1.2 2 2 ...
##  $ C5               : num  0 1 0 0 0 1 2 0 0 0 ...
##  $ GroupContribute5 : num  1 1 1 1 3 3 3 3 2 2 ...
##  $ ProfitPG5        : num  0.4 0.4 0.4 0.4 1.2 1.2 1.2 1.2 0.8 0.8 ...
##  $ C6               : num  0 0 5 4 1 0 0 0 2 1 ...
##  $ GroupContribute6 : num  9 9 9 9 1 1 1 1 7 7 ...
##  $ ProfitPG6        : num  3.6 3.6 3.6 3.6 0.4 0.4 0.4 0.4 2.8 2.8 ...
##  $ C7               : num  0 0 3 0 0 4 0 0 0 3 ...
##  $ GroupContribute7 : num  3 3 3 3 4 4 4 4 3 3 ...
##  $ ProfitPG7        : num  1.2 1.2 1.2 1.2 1.6 1.6 1.6 1.6 1.2 1.2 ...
##  $ C8               : num  0 0 0 0 0 1 1 5 0 0 ...
##  $ GroupContribute8 : num  0 0 0 0 7 7 7 7 1 1 ...
##  $ ProfitPG8        : num  0 0 0 0 2.8 2.8 2.8 2.8 0.4 0.4 ...
##  $ C9               : num  1 2 0 0 0 0 3 0 0 0 ...
##  $ GroupContribute9 : num  3 3 3 3 3 3 3 3 0 0 ...
##  $ ProfitPG9        : num  1.2 1.2 1.2 1.2 1.2 1.2 1.2 1.2 0 0 ...
##  $ C10              : num  0 0 1 0 0 2 0 0 2 0 ...
##  $ GroupContribute10: num  1 1 1 1 2 2 2 2 4 4 ...
##  $ ProfitPG10       : num  0.4 0.4 0.4 0.4 0.8 0.8 0.8 0.8 1.6 1.6 ...
##  $ q206             : num  2 1 2 2 2 2 2 3 1 1 ...
##  $ Rank1            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt1        : chr  NA NA NA NA ...
##  $ Rank2            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt2        : chr  NA NA NA NA ...
##  $ Rank3            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt3        : chr  NA NA NA NA ...
##  $ Rank4            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt4        : chr  NA NA NA NA ...
##  $ Rank5            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt5        : chr  NA NA NA NA ...
##  $ Rank6            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt6        : chr  NA NA NA NA ...
##  $ Rank7            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt7        : chr  NA NA NA NA ...
##  $ Rank8            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt8        : chr  NA NA NA NA ...
##  $ Rank9            : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt9        : chr  NA NA NA NA ...
##  $ Rank10           : num  NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt10       : chr  NA NA NA NA ...
##  $ ID               : Factor w/ 96 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ Group_ID         : Factor w/ 24 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 1 1 1 1 2 2 2 2 3 3 ...</code></pre>
<div style="margin-bottom:50px;">

</div>
<pre class="r"><code>##############################################
# Issue (5): `Treatment`needs to be a factor.#
##############################################

alldata$Treatment &lt;- as.factor(alldata$Treatment )

str(alldata$Treatment) #Easy peasy!</code></pre>
<pre><code>##  Factor w/ 2 levels &quot;Control&quot;,&quot;Pride&quot;: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<div style="margin-bottom:50px;">

</div>
<pre class="r"><code>#########################################################################################
# Issue (6): `q101` to `q104` and `q206` need to be renamed and inspected individually. #
#########################################################################################

# q101: النوع؟
# 1- ذكر
# 2- أنثى


# q102: كم عمرك بالسنوات؟

# q103: ما هي ديانتك؟
#1- مسلم
#2- مسيحي  


# q104: إقامة عائلتك بصورة أساسية في:
# 1- الريف
# 2- الحضر


# q206: بشكل عام، كيف تُقيم الوضع الاقتصادي لأسرتك؟
# 1- نستطيع شراء الأشياء التي نحتاجها، ونستطيع ادخار بعض المال.
# 2- نستطيع شراء الأشياء التي نحتاجها، ولكن لا نستطيع الإدخار
# 3- نحن نعاني من أجل شراء ما نحتاجه 


alldata &lt;- rename(alldata,
    Gender = q101,
    Age = q102,
    Religion = q103,
    Residence = q104,
    FinancialStatus = q206
    )</code></pre>
<pre class="r"><code># Make gender a factor and rename levels to male and female 
alldata$Gender &lt;- factor(alldata$Gender, 
                         levels=c(&quot;1&quot;,&quot;2&quot;),
                         labels=c(&quot;Male&quot;,&quot;Female&quot;))
  
str(alldata$Gender)</code></pre>
<pre><code>##  Factor w/ 2 levels &quot;Male&quot;,&quot;Female&quot;: 1 2 2 2 2 2 2 1 1 1 ...</code></pre>
<pre class="r"><code># Change Religion into a factor with levels
alldata$Religion &lt;- factor(alldata$Religion, 
                         levels=c(&quot;1&quot;,&quot;2&quot;),
                         labels=c(&quot;Muslim&quot;,&quot;Christian&quot;))
  
str(alldata$Religion)</code></pre>
<pre><code>##  Factor w/ 2 levels &quot;Muslim&quot;,&quot;Christian&quot;: 1 1 2 1 1 1 1 1 1 1 ...</code></pre>
<pre class="r"><code># Change FinancialStatus into a factor with levels

alldata$FinancialStatus &lt;- factor(alldata$FinancialStatus, 
                         levels=c(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;),
                         labels=c(&quot;High&quot;,&quot;Medium&quot;,&quot;Low&quot;))
  
str(alldata$FinancialStatus)</code></pre>
<pre><code>##  Factor w/ 3 levels &quot;High&quot;,&quot;Medium&quot;,..: 2 1 2 2 2 2 2 3 1 1 ...</code></pre>
<div style="margin-bottom:50px;">

</div>
<pre class="r"><code>#############################################################################
# Issue (7): `PrideTrt1` to `PrideTrt10` needs to be changed into a factor. #
#############################################################################

# Select all variables that begin with PrideTrt
PrideTrtVars &lt;- grep(&quot;PrideTrt&quot;,names(alldata))

# Change them all at once to factor using lapply
alldata[,PrideTrtVars] &lt;- lapply(alldata[,PrideTrtVars], factor)


# Check your work
str(alldata[,PrideTrtVars])</code></pre>
<pre><code>## &#39;data.frame&#39;:    96 obs. of  10 variables:
##  $ PrideTrt1 : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt2 : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt3 : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt4 : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt5 : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt6 : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt7 : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt8 : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt9 : Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: NA NA NA NA NA NA NA NA NA NA ...
##  $ PrideTrt10: Factor w/ 2 levels &quot;N&quot;,&quot;Y&quot;: NA NA NA NA NA NA NA NA NA NA ...</code></pre>
<div style="margin-bottom:70px;">

</div>
<ul>
<li><strong>Second:</strong> Let’s take a quick look at the summary of the data.</li>
</ul>
<pre class="r"><code>summary(alldata)</code></pre>
<pre><code>##       Date               Session      Subject.ID        Group       Scenario1
##  Min.   :2018-07-08   Min.   :1.0   Min.   : 1.00   Min.   : 1.00   X:56     
##  1st Qu.:2018-07-08   1st Qu.:1.0   1st Qu.:12.75   1st Qu.: 3.75   Y:40     
##  Median :2018-07-08   Median :1.5   Median :24.50   Median : 6.50            
##  Mean   :2018-07-08   Mean   :1.5   Mean   :24.50   Mean   : 6.50            
##  3rd Qu.:2018-07-09   3rd Qu.:2.0   3rd Qu.:36.25   3rd Qu.: 9.25            
##  Max.   :2018-07-09   Max.   :2.0   Max.   :48.00   Max.   :12.00            
##                                                                              
##  Scenario2 Scenario3 Scenario4 Scenario5 Scenario6 Scenario7 Scenario8
##  X:49      X:52      X:46      X:60      X:58      X:52      X:41     
##  Y:47      Y:44      Y:50      Y:36      Y:38      Y:44      Y:55     
##                                                                       
##                                                                       
##                                                                       
##                                                                       
##                                                                       
##    Treatment     Gender        Age             Religion    Residence    
##  Control:48   Male  :22   Min.   :18.00   Muslim   :92   Min.   :1.000  
##  Pride  :48   Female:74   1st Qu.:21.00   Christian: 4   1st Qu.:2.000  
##                           Median :21.00                  Median :2.000  
##                           Mean   :21.27                  Mean   :1.938  
##                           3rd Qu.:22.00                  3rd Qu.:2.000  
##                           Max.   :26.00                  Max.   :2.000  
##                                                                         
##    SubTotal1       SubTotal2       SubTotal3       SubTotal4    
##  Min.   : 9.60   Min.   :11.20   Min.   :13.00   Min.   :10.00  
##  1st Qu.:19.95   1st Qu.:20.95   1st Qu.:19.60   1st Qu.:20.00  
##  Median :23.00   Median :22.40   Median :21.00   Median :20.90  
##  Mean   :22.98   Mean   :22.76   Mean   :22.51   Mean   :22.02  
##  3rd Qu.:26.25   3rd Qu.:25.25   3rd Qu.:24.10   3rd Qu.:23.85  
##  Max.   :37.20   Max.   :34.80   Max.   :38.40   Max.   :31.80  
##                                                                 
##    SubTotal5       SubTotal6       SubTotal7       SubTotal8    
##  Min.   : 8.80   Min.   :11.20   Min.   :16.60   Min.   :11.60  
##  1st Qu.:20.00   1st Qu.:20.00   1st Qu.:20.00   1st Qu.:20.00  
##  Median :20.80   Median :21.20   Median :21.20   Median :20.80  
##  Mean   :22.02   Mean   :21.92   Mean   :21.67   Mean   :21.65  
##  3rd Qu.:23.65   3rd Qu.:23.85   3rd Qu.:23.00   3rd Qu.:22.60  
##  Max.   :33.40   Max.   :34.00   Max.   :43.20   Max.   :38.40  
##                                  NA&#39;s   :12      NA&#39;s   :12     
##    SubTotal9       SubTotal10        Profit            C1        
##  Min.   :16.00   Min.   :10.00   Min.   :25.00   Min.   : 0.000  
##  1st Qu.:19.75   1st Qu.:20.00   1st Qu.:50.61   1st Qu.: 0.000  
##  Median :20.70   Median :20.80   Median :54.00   Median : 5.000  
##  Mean   :21.51   Mean   :21.48   Mean   :53.31   Mean   : 5.021  
##  3rd Qu.:23.05   3rd Qu.:22.90   3rd Qu.:58.00   3rd Qu.: 8.000  
##  Max.   :36.00   Max.   :32.00   Max.   :78.00   Max.   :20.000  
##  NA&#39;s   :12      NA&#39;s   :16                                      
##  GroupContribute1   ProfitPG1           C2         GroupContribute2
##  Min.   : 6.00    Min.   : 2.40   Min.   : 0.000   Min.   : 2.00   
##  1st Qu.:14.75    1st Qu.: 5.90   1st Qu.: 0.000   1st Qu.: 8.25   
##  Median :19.00    Median : 7.60   Median : 4.500   Median :16.50   
##  Mean   :19.88    Mean   : 7.95   Mean   : 4.604   Mean   :18.42   
##  3rd Qu.:22.00    3rd Qu.: 8.80   3rd Qu.: 7.250   3rd Qu.:26.50   
##  Max.   :43.00    Max.   :17.20   Max.   :20.000   Max.   :51.00   
##                                                                    
##    ProfitPG2            C3         GroupContribute3   ProfitPG3     
##  Min.   : 0.800   Min.   : 0.000   Min.   : 0.00    Min.   : 0.000  
##  1st Qu.: 3.300   1st Qu.: 0.000   1st Qu.: 3.75    1st Qu.: 1.500  
##  Median : 6.600   Median : 2.000   Median :11.50    Median : 4.600  
##  Mean   : 7.367   Mean   : 4.177   Mean   :16.71    Mean   : 6.683  
##  3rd Qu.:10.600   3rd Qu.: 5.000   3rd Qu.:21.50    3rd Qu.: 8.600  
##  Max.   :20.400   Max.   :20.000   Max.   :65.00    Max.   :26.000  
##                                                                     
##        C4         GroupContribute4   ProfitPG4          C5        
##  Min.   : 0.000   Min.   : 0.00    Min.   : 0.0   Min.   : 0.000  
##  1st Qu.: 0.000   1st Qu.: 2.75    1st Qu.: 1.1   1st Qu.: 0.000  
##  Median : 1.000   Median : 9.00    Median : 3.6   Median : 1.000  
##  Mean   : 3.375   Mean   :13.50    Mean   : 5.4   Mean   : 3.375  
##  3rd Qu.: 5.000   3rd Qu.:19.75    3rd Qu.: 7.9   3rd Qu.: 5.000  
##  Max.   :20.000   Max.   :62.00    Max.   :24.8   Max.   :20.000  
##                                                                   
##  GroupContribute5   ProfitPG5          C6        GroupContribute6
##  Min.   : 0.00    Min.   : 0.0   Min.   : 0.00   Min.   : 0.00   
##  1st Qu.: 2.75    1st Qu.: 1.1   1st Qu.: 0.00   1st Qu.: 2.75   
##  Median : 7.50    Median : 3.0   Median : 1.00   Median : 8.50   
##  Mean   :13.50    Mean   : 5.4   Mean   : 3.25   Mean   :12.79   
##  3rd Qu.:19.75    3rd Qu.: 7.9   3rd Qu.: 5.00   3rd Qu.:19.75   
##  Max.   :68.00    Max.   :27.2   Max.   :20.00   Max.   :60.00   
##                                                                  
##    ProfitPG6            C7         GroupContribute7   ProfitPG7     
##  Min.   : 0.000   Min.   : 0.000   Min.   : 0.00    Min.   : 0.000  
##  1st Qu.: 1.100   1st Qu.: 0.000   1st Qu.: 3.00    1st Qu.: 1.200  
##  Median : 3.400   Median : 1.000   Median : 5.00    Median : 2.000  
##  Mean   : 5.117   Mean   : 2.833   Mean   :11.14    Mean   : 4.457  
##  3rd Qu.: 7.900   3rd Qu.: 4.250   3rd Qu.:12.00    3rd Qu.: 4.800  
##  Max.   :24.000   Max.   :20.000   Max.   :58.00    Max.   :23.200  
##                   NA&#39;s   :12       NA&#39;s   :12       NA&#39;s   :12      
##        C8         GroupContribute8   ProfitPG8          C9        
##  Min.   : 0.000   Min.   : 0       Min.   : 0.0   Min.   : 0.000  
##  1st Qu.: 0.000   1st Qu.: 2       1st Qu.: 0.8   1st Qu.: 0.000  
##  Median : 1.000   Median : 7       Median : 2.8   Median : 0.500  
##  Mean   : 2.774   Mean   :11       Mean   : 4.4   Mean   : 2.524  
##  3rd Qu.: 4.000   3rd Qu.:11       3rd Qu.: 4.4   3rd Qu.: 5.000  
##  Max.   :20.000   Max.   :46       Max.   :18.4   Max.   :20.000  
##  NA&#39;s   :12       NA&#39;s   :12       NA&#39;s   :12     NA&#39;s   :12      
##  GroupContribute9   ProfitPG9           C10         GroupContribute10
##  Min.   : 0.0     Min.   : 0.000   Min.   : 0.000   Min.   : 0.00    
##  1st Qu.: 3.0     1st Qu.: 1.200   1st Qu.: 0.000   1st Qu.: 1.75    
##  Median : 9.0     Median : 3.600   Median : 0.000   Median : 6.50    
##  Mean   :10.1     Mean   : 4.038   Mean   : 2.462   Mean   : 9.85    
##  3rd Qu.:12.0     3rd Qu.: 4.800   3rd Qu.: 3.000   3rd Qu.:16.50    
##  Max.   :40.0     Max.   :16.000   Max.   :20.000   Max.   :30.00    
##  NA&#39;s   :12       NA&#39;s   :12       NA&#39;s   :16       NA&#39;s   :16       
##    ProfitPG10    FinancialStatus     Rank1      PrideTrt1     Rank2     
##  Min.   : 0.00   High  :43       Min.   :1.00   N   :24   Min.   :1.00  
##  1st Qu.: 0.70   Medium:46       1st Qu.:1.75   Y   :24   1st Qu.:1.75  
##  Median : 2.60   Low   : 7       Median :2.50   NA&#39;s:48   Median :2.50  
##  Mean   : 3.94                   Mean   :2.50             Mean   :2.50  
##  3rd Qu.: 6.60                   3rd Qu.:3.25             3rd Qu.:3.25  
##  Max.   :12.00                   Max.   :4.00             Max.   :4.00  
##  NA&#39;s   :16                      NA&#39;s   :48               NA&#39;s   :48    
##  PrideTrt2     Rank3      PrideTrt3     Rank4      PrideTrt4     Rank5     
##  N   :25   Min.   :1.00   N   :26   Min.   :1.00   N   :30   Min.   :1.00  
##  Y   :23   1st Qu.:1.75   Y   :22   1st Qu.:1.75   Y   :18   1st Qu.:1.75  
##  NA&#39;s:48   Median :2.50   NA&#39;s:48   Median :2.50   NA&#39;s:48   Median :2.50  
##            Mean   :2.50             Mean   :2.50             Mean   :2.50  
##            3rd Qu.:3.25             3rd Qu.:3.25             3rd Qu.:3.25  
##            Max.   :4.00             Max.   :4.00             Max.   :4.00  
##            NA&#39;s   :48               NA&#39;s   :48               NA&#39;s   :48    
##  PrideTrt5     Rank6      PrideTrt6     Rank7      PrideTrt7     Rank8     
##  N   :29   Min.   :1.00   N   :30   Min.   :1.00   N   :26   Min.   :1.00  
##  Y   :19   1st Qu.:1.75   Y   :18   1st Qu.:1.75   Y   :22   1st Qu.:1.75  
##  NA&#39;s:48   Median :2.50   NA&#39;s:48   Median :2.50   NA&#39;s:48   Median :2.50  
##            Mean   :2.50             Mean   :2.50             Mean   :2.50  
##            3rd Qu.:3.25             3rd Qu.:3.25             3rd Qu.:3.25  
##            Max.   :4.00             Max.   :4.00             Max.   :4.00  
##            NA&#39;s   :48               NA&#39;s   :48               NA&#39;s   :48    
##  PrideTrt8     Rank9      PrideTrt9     Rank10     PrideTrt10       ID    
##  N   :29   Min.   :1.00   N   :28   Min.   :1.00   N   :28    1      : 1  
##  Y   :19   1st Qu.:1.75   Y   :20   1st Qu.:1.75   Y   :16    2      : 1  
##  NA&#39;s:48   Median :2.50   NA&#39;s:48   Median :2.50   NA&#39;s:52    3      : 1  
##            Mean   :2.50             Mean   :2.50              4      : 1  
##            3rd Qu.:3.25             3rd Qu.:3.25              5      : 1  
##            Max.   :4.00             Max.   :4.00              6      : 1  
##            NA&#39;s   :48               NA&#39;s   :52                (Other):90  
##     Group_ID 
##  1      : 4  
##  2      : 4  
##  3      : 4  
##  4      : 4  
##  5      : 4  
##  6      : 4  
##  (Other):72</code></pre>
<p>The <code>summary</code> function shows a summary of every variable so one can check limits and if there are NAs that need attention.</p>
<p>Nothing worth cleaning is apparent.</p>
<div style="margin-bottom:78px;">

</div>
</div>
<div id="looking-at-structural-issues" class="section level1">
<h1>Looking at Structural Issues</h1>
<p>Since</p>
<ul>
<li>Each variable is a column</li>
<li>Each observation is a row</li>
<li>Each type of observational unit is a dataframe (after merging)</li>
</ul>
<p>we have no structural issues and our data is clean and ready for the next step!</p>
<div style="margin-bottom:80px;">

</div>
</div>
<div id="save-the-tidy-data" class="section level1">
<h1>Save the Tidy Data</h1>
<pre class="r"><code># Save clean data in an excel file that can be used later
write.xlsx(alldata,&quot;Clean Data.xlsx&quot;)</code></pre>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
